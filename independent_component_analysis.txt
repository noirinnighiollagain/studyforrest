#!/bin/bash###### Author:Noirin Ni Ghiollagain###### Version:v.0.50###### Description of script: smoothing and filtering BOLD fMRI files (run 5 only) from the Forrest Gump dataset and running ICA MELODIC on the preprocessed data# -- Request ONE node in the cluster#SBATCH -n 4#SBATCH --mem 256000M# -- Request a node in the 'compute' partition#SBATCH -p compute#SBATCH -t 14:00:00# -- Give the job a name for identification#SBATCH -J gump# -- Ask for an email at beginning and end of job#SBATCH --mail-type ALL# -- Send the email to #SBATCH --mail-user nghiolln@tcd.ie# -- Load the correct modules. /etc/profile.d/modules.sh module load apps fsl################################################################################################################## Change directory to location of datacd /home/shared/pi-bokdea/gumptarget_dir="/home/shared/pi-bokdea/gump"###### load in the data####Subject 01#Run 05fslmaths ./tradjusted/sub01_run05.nii.gz -bptf 50 -1 -kernel boxv3 5 5 5 -fmean -s 3 ./preprocessed/sub01_run05_ppmelodic -i ./preprocessed/sub01_run05_pp.nii.gz -o sub01_run05_ICA -m ./ica_templates/MNI152_T1_1mm_brain_mask_dil.nii.gz -d 40 --report --nobet --bgimage=./tradjusted/sub01_run05.nii.gz --Tdes=./ica_timeseries/run5_model.mat --Tcon=./ica_timeseries/run5_model.con --Ostats --Opca####Subject 02#Run 05fslmaths ./tradjusted/sub02_run05.nii.gz -bptf 50 -1 -kernel boxv3 5 5 5 -fmean -s 3 ./preprocessed/sub02_run05_ppmelodic -i ./preprocessed/sub02_run05_pp.nii.gz -o sub02_run05_ICA -m ./ica_templates/MNI152_T1_1mm_brain_mask_dil.nii.gz -d 40 --report --nobet --bgimage=./tradjusted/sub02_run05.nii.gz --Tdes=./ica_timeseries/run5_model.mat --Tcon=./ica_timeseries/run5_model.con --Ostats --Opca####Subject 03#Run 05fslmaths ./tradjusted/sub03_run05.nii.gz -bptf 50 -1 -kernel boxv3 5 5 5 -fmean -s 3 ./preprocessed/sub03_run05_ppmelodic -i ./preprocessed/sub03_run05_pp.nii.gz -o sub03_run05_ICA -m ./ica_templates/MNI152_T1_1mm_brain_mask_dil.nii.gz -d 40 --report --nobet --bgimage=./tradjusted/sub03_run05.nii.gz --Tdes=./ica_timeseries/run5_model.mat --Tcon=./ica_timeseries/run5_model.con --Ostats --Opca####Subject 04#Run 05fslmaths ./tradjusted/sub04_run05.nii.gz -bptf 50 -1 -kernel boxv3 5 5 5 -fmean -s 3 ./preprocessed/sub04_run05_ppmelodic -i ./preprocessed/sub04_run05_pp.nii.gz -o sub04_run05_ICA -m ./ica_templates/MNI152_T1_1mm_brain_mask_dil.nii.gz -d 40 --report --nobet --bgimage=./tradjusted/sub04_run05.nii.gz --Tdes=./ica_timeseries/run5_model.mat --Tcon=./ica_timeseries/run5_model.con --Ostats --Opca####Subject 05#Run 05fslmaths ./tradjusted/sub05_run05.nii.gz -bptf 50 -1 -kernel boxv3 5 5 5 -fmean -s 3 ./preprocessed/sub05_run05_ppmelodic -i ./preprocessed/sub05_run05_pp.nii.gz -o sub05_run05_ICA -m ./ica_templates/MNI152_T1_1mm_brain_mask_dil.nii.gz -d 40 --report --nobet --bgimage=./tradjusted/sub05_run05.nii.gz --Tdes=./ica_timeseries/run5_model.mat --Tcon=./ica_timeseries/run5_model.con --Ostats --Opca####Subject 06#Run 05fslmaths ./tradjusted/sub06_run05.nii.gz -bptf 50 -1 -kernel boxv3 5 5 5 -fmean -s 3 ./preprocessed/sub06_run05_ppmelodic -i ./preprocessed/sub06_run05_pp.nii.gz -o sub06_run05_ICA -m ./ica_templates/MNI152_T1_1mm_brain_mask_dil.nii.gz -d 40 --report --nobet --bgimage=./tradjusted/sub06_run05.nii.gz --Tdes=./ica_timeseries/run5_model.mat --Tcon=./ica_timeseries/run5_model.con --Ostats --Opca#### Subject 07#Run 05fslmaths ./tradjusted/sub07_run05.nii.gz -bptf 50 -1 -kernel boxv3 5 5 5 -fmean -s 3 ./preprocessed/sub07_run05_ppmelodic -i ./preprocessed/sub07_run05_pp.nii.gz -o sub07_run05_ICA -m ./ica_templates/MNI152_T1_1mm_brain_mask_dil.nii.gz -d 40 --report --nobet --bgimage=./tradjusted/sub07_run05.nii.gz --Tdes=./ica_timeseries/run5_model.mat --Tcon=./ica_timeseries/run5_model.con --Ostats --Opca#### Subject 08#Run 05fslmaths ./tradjusted/sub08_run05.nii.gz -bptf 50 -1 -kernel boxv3 5 5 5 -fmean -s 3 ./preprocessed/sub08_run05_ppmelodic -i ./preprocessed/sub08_run05_pp.nii.gz -o sub08_run05_ICA -m ./ica_templates/MNI152_T1_1mm_brain_mask_dil.nii.gz -d 40 --report --nobet --bgimage=./tradjusted/sub08_run05.nii.gz --Tdes=./ica_timeseries/run5_model.mat --Tcon=./ica_timeseries/run5_model.con --Ostats --Opca#### Subject 09#Run 05fslmaths ./tradjusted/sub09_run05.nii.gz -bptf 50 -1 -kernel boxv3 5 5 5 -fmean -s 3 ./preprocessed/sub09_run05_ppmelodic -i ./preprocessed/sub09_run05_pp.nii.gz -o sub09_run05_ICA -m ./ica_templates/MNI152_T1_1mm_brain_mask_dil.nii.gz -d 40 --report --nobet --bgimage=./tradjusted/sub09_run05.nii.gz --Tdes=./ica_timeseries/run5_model.mat --Tcon=./ica_timeseries/run5_model.con --Ostats --Opca#### Subject 11#Run 05fslmaths ./tradjusted/sub11_run05.nii.gz -bptf 50 -1 -kernel boxv3 5 5 5 -fmean -s 3 ./preprocessed/sub11_run05_ppmelodic -i ./preprocessed/sub11_run05_pp.nii.gz -o sub11_run05_ICA -m ./ica_templates/MNI152_T1_1mm_brain_mask_dil.nii.gz -d 40 --report --nobet --bgimage=./tradjusted/sub11_run05.nii.gz --Tdes=./ica_timeseries/run5_model.mat --Tcon=./ica_timeseries/run5_model.con --Ostats --Opca#### Subject 12#Run 05fslmaths ./tradjusted/sub12_run05.nii.gz -bptf 50 -1 -kernel boxv3 5 5 5 -fmean -s 3 ./preprocessed/sub12_run05_ppmelodic -i ./preprocessed/sub12_run05_pp.nii.gz -o sub12_run05_ICA -m ./ica_templates/MNI152_T1_1mm_brain_mask_dil.nii.gz -d 40 --report --nobet --bgimage=./tradjusted/sub12_run05.nii.gz --Tdes=./ica_timeseries/run5_model.mat --Tcon=./ica_timeseries/run5_model.con --Ostats --Opca#### Subject 13#Run 05fslmaths ./tradjusted/sub13_run05.nii.gz -bptf 50 -1 -kernel boxv3 5 5 5 -fmean -s 3 ./preprocessed/sub13_run05_ppmelodic -i ./preprocessed/sub13_run05_pp.nii.gz -o sub13_run05_ICA -m ./ica_templates/MNI152_T1_1mm_brain_mask_dil.nii.gz -d 40 --report --nobet --bgimage=./tradjusted/sub13_run05.nii.gz --Tdes=./ica_timeseries/run5_model.mat --Tcon=./ica_timeseries/run5_model.con --Ostats --Opca#### Subject 14#Run 05fslmaths ./tradjusted/sub14_run05.nii.gz -bptf 50 -1 -kernel boxv3 5 5 5 -fmean -s 3 ./preprocessed/sub14_run05_ppmelodic -i ./preprocessed/sub14_run05_pp.nii.gz -o sub14_run05_ICA -m ./ica_templates/MNI152_T1_1mm_brain_mask_dil.nii.gz -d 40 --report --nobet --bgimage=./tradjusted/sub14_run05.nii.gz --Tdes=./ica_timeseries/run5_model.mat --Tcon=./ica_timeseries/run5_model.con --Ostats --Opca#### Subject 15#Run 05fslmaths ./tradjusted/sub15_run05.nii.gz -bptf 50 -1 -kernel boxv3 5 5 5 -fmean -s 3 ./preprocessed/sub15_run05_ppmelodic -i ./preprocessed/sub15_run05_pp.nii.gz -o sub15_run05_ICA -m ./ica_templates/MNI152_T1_1mm_brain_mask_dil.nii.gz -d 40 --report --nobet --bgimage=./tradjusted/sub15_run05.nii.gz --Tdes=./ica_timeseries/run5_model.mat --Tcon=./ica_timeseries/run5_model.con --Ostats --Opca#### Subject 16#Run 05fslmaths ./tradjusted/sub16_run05.nii.gz -bptf 50 -1 -kernel boxv3 5 5 5 -fmean -s 3 ./preprocessed/sub16_run05_ppmelodic -i ./preprocessed/sub16_run05_pp.nii.gz -o sub16_run05_ICA -m ./ica_templates/MNI152_T1_1mm_brain_mask_dil.nii.gz -d 40 --report --nobet --bgimage=./tradjusted/sub16_run05.nii.gz --Tdes=./ica_timeseries/run5_model.mat --Tcon=./ica_timeseries/run5_model.con --Ostats --Opca#### Subject 17#Run 05fslmaths ./tradjusted/sub17_run05.nii.gz -bptf 50 -1 -kernel boxv3 5 5 5 -fmean -s 3 ./preprocessed/sub17_run05_ppmelodic -i ./preprocessed/sub17_run05_pp.nii.gz -o sub17_run05_ICA -m ./ica_templates/MNI152_T1_1mm_brain_mask_dil.nii.gz -d 40 --report --nobet --bgimage=./tradjusted/sub17_run05.nii.gz --Tdes=./ica_timeseries/run5_model.mat --Tcon=./ica_timeseries/run5_model.con --Ostats --Opca#### Subject 18#Run 05fslmaths ./tradjusted/sub18_run05.nii.gz -bptf 50 -1 -kernel boxv3 5 5 5 -fmean -s 3 ./preprocessed/sub18_run05_ppmelodic -i ./preprocessed/sub18_run05_pp.nii.gz -o sub18_run05_ICA -m ./ica_templates/MNI152_T1_1mm_brain_mask_dil.nii.gz -d 40 --report --nobet --bgimage=./tradjusted/sub18_run05.nii.gz --Tdes=./ica_timeseries/run5_model.mat --Tcon=./ica_timeseries/run5_model.con --Ostats --Opca#### Subject 19#Run 05fslmaths ./tradjusted/sub19_run05.nii.gz -bptf 50 -1 -kernel boxv3 5 5 5 -fmean -s 3 ./preprocessed/sub19_run05_ppmelodic -i ./preprocessed/sub19_run05_pp.nii.gz -o sub19_run05_ICA -m ./ica_templates/MNI152_T1_1mm_brain_mask_dil.nii.gz -d 40 --report --nobet --bgimage=./tradjusted/sub19_run05.nii.gz --Tdes=./ica_timeseries/run5_model.mat --Tcon=./ica_timeseries/run5_model.con --Ostats --Opca#### Subject 20#Run 05fslmaths ./tradjusted/sub20_run05.nii.gz -bptf 50 -1 -kernel boxv3 5 5 5 -fmean -s 3 ./preprocessed/sub20_run05_ppmelodic -i ./preprocessed/sub20_run05_pp.nii.gz -o sub20_run05_ICA -m ./ica_templates/MNI152_T1_1mm_brain_mask_dil.nii.gz -d 40 --report --nobet --bgimage=./tradjusted/sub20_run05.nii.gz --Tdes=./ica_timeseries/run5_model.mat --Tcon=./ica_timeseries/run5_model.con --Ostats ÐOpca